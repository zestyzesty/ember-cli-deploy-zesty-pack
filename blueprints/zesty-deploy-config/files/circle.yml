machine:
  node:
    version: 6

dependencies:
  override:
    - npm install -g bower yarn
    - bower install
    - yarn install

  cache_directories:
    - ~/.yarn-cache

deployment:
  production:
    branch: master
    commands:
      - yarn run -- ember deploy production --activate

  pull-request:
    branch: /^((?!master).)*$/
    commands:
      - 'if [ -n "$CI_PULL_REQUEST" ]; then ember deploy pull-request; fi'
